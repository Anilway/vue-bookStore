webpackJsonp([2],{"5zde":function(e,t,o){o("zQR9"),o("qyJz"),e.exports=o("FeBl").Array.from},Gu7T:function(e,t,o){"use strict";t.__esModule=!0;var r,n=o("c/Tr"),s=(r=n)&&r.__esModule?r:{default:r};t.default=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return(0,s.default)(e)}},"c/Tr":function(e,t,o){e.exports={default:o("5zde"),__esModule:!0}},fBQ2:function(e,t,o){"use strict";var r=o("evD5"),n=o("X8DO");e.exports=function(e,t,o){t in e?r.f(e,t,n(0,o)):e[t]=o}},qpYE:function(e,t){},qyJz:function(e,t,o){"use strict";var r=o("+ZMJ"),n=o("kM2E"),s=o("sB3e"),a=o("msXi"),i=o("Mhyx"),c=o("QRG4"),u=o("fBQ2"),f=o("3fs2");n(n.S+n.F*!o("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,o,n,l,v=s(e),d="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,p=void 0!==m,g=0,k=f(v);if(p&&(m=r(m,h>2?arguments[2]:void 0,2)),void 0==k||d==Array&&i(k))for(o=new d(t=c(v.length));t>g;g++)u(o,g,p?m(v[g],g):v[g]);else for(l=k.call(v),o=new d;!(n=l.next()).done;g++)u(o,g,p?a(l,m,[n.value,g],!0):n.value);return o.length=g,o}})},tcnj:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=o("Xxa5"),n=o.n(r),s=o("Gu7T"),a=o.n(s),i=o("exGp"),c=o.n(i),u=o("UeVD"),f=o("gyMJ"),l=(function(){function e(e,t,o,r){return e/r*o+t}}(),{data:function(){return{books:[],offset:0,hasMore:!0,isLoading:!1,msg:"点击加载更多"}},mounted:function(){var e=this,t=this.$refs.scroll,o=t.offsetTop;t.addEventListener("touchstart",function(r){if(0===t.scrollTop&&t.offsetTop===o){var n=r.touches[0].pageY,s=0,a=function e(r){var a=r.touches[0].pageY;(s=a-n)>0?s<=150?t.style.top=s+o+"px":(s=150,t.style.top=150+o+"px"):(t.removeEventListener("touchmove",e),t.removeEventListener("touchend",i))},i=function r(n){clearInterval(e.scrollTimer),e.scrollTimer=setInterval(function(){if(s<=0)return clearInterval(e.scrollTimer),s=0,t.style.top=o+"px",t.removeEventListener("touchmove",a),t.removeEventListener("touchend",r),e.books=[],e.offset=0,e.hasMore=!0,e.getData(),void(e.msg="正在刷新");(s/=1.5)<1&&(s=0),t.style.top=o+s+"px"},17)};t.addEventListener("touchmove",a),t.addEventListener("touchend",i)}},!1)},created:function(){this.getData()},methods:{loadMore:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout(function(){var t=e.$refs.scroll,o=t.scrollTop,r=t.scrollHeight;o+t.clientHeight+20>r&&e.getData()},50)},more:function(){this.hasMore?this.getData():this.msg="已加载到底部"},getData:function(){var e=this;return c()(n.a.mark(function t(){var o,r;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.hasMore||e.isLoading){t.next=12;break}return e.msg="加载中...",e.isLoading=!0,t.next=5,Object(f.d)(e.offset);case 5:o=t.sent,r=o.data,e.books=[].concat(a()(e.books),a()(r.books)),e.hasMore=r.hasMore,e.offset=e.books.length,e.isLoading=!1,e.msg="点击加载更多";case 12:case"end":return t.stop()}},t,e)}))()},remove:function(e){var t=this;return c()(n.a.mark(function o(){return n.a.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,Object(f.e)(e);case 2:t.books=t.books.filter(function(t){return t.bookId!==e});case 3:case"end":return o.stop()}},o,t)}))()}},computed:{},components:{MHeader:u.a},filters:{toFixed:function(e){if(!isNaN(e))return"￥"+e.toFixed(2)}}}),v={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("MHeader",{staticClass:"MHeader",attrs:{show:!0}},[e._v("列表页")]),e._v(" "),o("div",{ref:"scroll",staticClass:"container",on:{scroll:e.loadMore}},[o("ul",[e._l(e.books,function(t,r){return o("router-link",{key:r,attrs:{to:{name:"detail",params:{uid:t.bookId}},tag:"li"}},[o("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.bookCover,expression:"book.bookCover"}]}),e._v(" "),o("div",{staticClass:"info"},[o("h4",[e._v(e._s(t.bookName))]),e._v(" "),o("p",{staticClass:"bookInfo"},[e._v(e._s(t.bookInfo))]),e._v(" "),o("p",{staticClass:"bookPrice"},[e._v(e._s(e._f("toFixed")(t.bookPrice)))]),e._v(" "),o("button",{staticClass:"btn",on:{click:function(o){o.stopPropagation(),e.remove(t.bookId)}}},[e._v("删除")])])])}),e._v(" "),o("li",{staticClass:"addmore",on:{click:e.more}},[e._v(e._s(e.msg))])],2)])],1)},staticRenderFns:[]};var d=o("VU/8")(l,v,!1,function(e){o("qpYE")},null,null);t.default=d.exports}});
//# sourceMappingURL=2.e8b16511b84c0301d88e.js.map